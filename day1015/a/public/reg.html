<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        input{
            margin: 10px;
        }
    </style>
</head>
<body style="text-align: center;">
    
    <h1 > 注册页面</h1>
    
        账号：<input type="text" name="uname" id="uname"> <br>
        密码：<input type="text" name="upwd" id="upwd"> <br>
        <button  onclick="toreg()">注册</button>
   
    
    <div id="d1" style="width: 200px; height: 100px; border: pink 1px solid ;"></div>
    <script>
        var d1=document.getElementById('d1')
            function toreg(){
                var uname = document.getElementById('uname')
                var upwd = document.getElementById('upwd')
                //ajax
                //1,创建小黄人
                var xhr =new XMLHttpRequest()
                //4，监听，接受响应
                    //5，根据相应做判断
                xhr.onreadystatechange=function(){
                    if(xhr.readyState==4 && xhr.status==200){
                        var r = xhr.responseText;
                        if(r==1){
                            self.location = "login.html"
                        }else{
                            d1.innerHTML='注册失败'
                        }
                    }
                }
                //2,创建请求，打开链接
                xhr.open('post','/user/reg',true)
                    //如果是post 请求  需要加请求头
                    xhr.setRequestHeader('content-type','application/x-www-form-urlencoded')
                //3,发送请求    如果是post 请求 需要把数据放到 send 发送
                                // 如果是get send() 参数为空
                var userdata=`uname= ${uname.value} &upwd=${upwd.value}`
                xhr.send(userdata)
            }
    </script>
</body>
</html>